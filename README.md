This software does statistical analysis of git and github-based repositories.
It will accept a list of repositories to analyse (with credentials if necessary) and talk both to github and check out code to do some analysis.

# Input data and formats
Configuration files must be placed in `analyser/input` folder.
Following files are allowed:
1. `repos.json`
This expects you to define following entries:
 ```json
[
    {
        "server": "github.com",
        "api": "api.github.com/graphql",
        "owner": "organization",
        "name": "org-repo",
        "token":"<token_with_repo_access>",
        "protocol": "https",
        "ignore_list": [ "pom.xml", "yarn.lock", "package.json", "package-lock.json" ], //files in your repo to ignore during analysis
        "long_living_branches": ["develop","master"], //long living branches of your repo, will never be marked as stale
        "main_branches": ["production"], //main branches of your repo, will never be marked as stale 
        "stale_branch_after": 30 //days of no activity after which branch is set to stale
    },
      {
        "server": "github.com",
        "api": "api.github.com/graphql",
        "owner": "user",
        "name": "user-repo",
        "token":"<token_with_repo_access>",
        "protocol": "https",
        "ignore_list": [ "pom.xml", "yarn.lock", "package.json", "package-lock.json" ],
        "long_living_branches": ["develop","master"],
        "main_branches": ["production"],
        "stale_branch_after": 30
    }
]
```
2. `teams.json`
```json
[
    {
      "name": "Team1", 
      "color": "#1A8FE3", //color to be used when drawing graphs
      "members": [
        {
          "name": "John",
          "email": "john@mail.com",
          "login": "johnny"
        },
        {
          "name": "Jane",
          "email": "jane@gmail.com",
          "login": "jane-coder"
        }
      ]
    }  
]
```
3. `mailmap` file in ```.mailmap``` format that will be used as default mailmap if no mailmap file is available in your repository. See https://git-scm.com/docs/gitmailmap. Optional. If your repository contains its own `.mailmap` file, it will be used. If your repository does not have `.mailmap`
file, but you provide `mailmap` file in `input` folder, this will be used. Not providing `.mailmap` file may result in confusing results, as different user emails will be recognized as different users. See linked document.

# Folder structure
`data_loader` python sources for analyser
`input` configuration files go here
`input_samples` self explanatory
`output` results of analyser will go here
`presenter` python sources for report generation. If you want to implement your own, feel free to use data from `output` folder.\
`reports` HTML reports generated by presenter go here

# Running
Using `analyser` as root folder, start `analyser.py` script.
It will check out the repository into `repos` folder and run analysis using both git and github capabilities.

# Using with docker
It is recommended to mount both `input` and `reports` folders into your image for easy configuration and report storage.